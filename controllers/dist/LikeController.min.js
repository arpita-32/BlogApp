"use strict";var Post=require("../models/postModel"),Like=require("../models/likeModel"),_require=require("express"),response=_require.response;exports.likePost=function(r,t){var n,s,o,a,u,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,s=n.post,o=n.user,a=new Like({post:s,user:o}),e.next=5,regeneratorRuntime.awrap(a.save());case 5:return u=e.sent,e.next=8,regeneratorRuntime.awrap(Post.findByIdAndUpdate(s,{$push:{likes:u._id}},{new:!0}).populate("likes").exec());case 8:i=e.sent,t.json({post:i}),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",t.status(500).json({error:"Error While Like Post"}));case 15:case"end":return e.stop()}},null,null,[[0,12]])},exports.unlikePost=function(r,t){var n,s,o,a,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,s=n.post,o=n.like,e.next=4,regeneratorRuntime.awrap(Like.findOneAndDelete({post:s,_id:o}));case 4:return a=e.sent,e.next=7,regeneratorRuntime.awrap(Post.findByIdAndUpdate(s,{$pull:{likes:a._id}},{new:!0}));case 7:u=e.sent,t.json({post:u}),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",t.status(500).json({error:"Error While unLike Post"}));case 14:case"end":return e.stop()}},null,null,[[0,11]])};
//# sourceMappingURL=LikeController.min.js.map
